<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Re Solution - GestÃ£o Financeira</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

        :root {
            --bg-body: #f8fafc; --bg-card: #ffffff; --text-main: #1e293b;
            --text-secondary: #64748b; --border-color: #e2e8f0; --input-bg: #ffffff;
            --primary-color: #2563eb; --success-color: #10b981; --danger-color: #ef4444;
        }

        body.dark-mode {
            --bg-body: #0f172a; --bg-card: #1e293b; --text-main: #f1f5f9;
            --text-secondary: #94a3b8; --border-color: #334155; --input-bg: #1e293b;
        }

        body { font-family: 'Inter', sans-serif; background-color: var(--bg-body); color: var(--text-main); margin: 0; }

        /* HEADER */
        .topo-titulo { background: var(--bg-card); padding: 1rem; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--border-color); sticky: top; z-index: 100; }
        
        /* BOTÃƒO MENU (ESCONDIDO POR PADRÃƒO NO PC) */
        .btn-menu-mobile { display: none; font-size: 1.5rem; background: none; border: none; cursor: pointer; color: var(--primary-color); }

        /* LAYOUT PADRÃƒO (PC) */
        .layout { display: grid; grid-template-columns: 280px 1fr; gap: 1.5rem; padding: 1.5rem; max-width: 1600px; margin: 0 auto; }
        
        .lateral { position: sticky; top: 1.5rem; height: fit-content; }
        .card { background: var(--bg-card); padding: 1.2rem; border-radius: 12px; border: 1px solid var(--border-color); margin-bottom: 10px; }
        .card span { display: block; font-size: 1.4rem; font-weight: 700; margin-top: 0.4rem; }
        
        /* TABELAS E FORM */
        .secao-form { background: var(--bg-card); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border-color); margin-bottom: 1.5rem; }
        .actions { display: flex; flex-wrap: wrap; gap: 8px; }
        .actions input, .actions select, .actions button { height: 40px; padding: 0 10px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--input-bg); color: var(--text-main); }
        #btnSalvar { background: var(--primary-color); color: white; border: none; flex: 1; font-weight: 600; cursor: pointer; }

        .container-tabelas { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
        .tabela-box { background: var(--bg-card); padding: 1.2rem; border-radius: 12px; border: 1px solid var(--border-color); overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        td, th { padding: 10px; border-bottom: 1px solid var(--border-color); text-align: left; }
        .btn-action { color: var(--danger-color); background: none; border: none; font-size: 1.1rem; cursor: pointer; }

        #bannerAlerta { display: none; background: var(--danger-color); color: white; text-align: center; padding: 8px; font-weight: bold; }

        /* --- CONFIGURAÃ‡ÃƒO EXCLUSIVA PARA CELULAR (Telas menores que 1024px) --- */
        @media (max-width: 1024px) {
            .btn-menu-mobile { display: block; } /* Mostra botÃ£o de menu */
            
            .layout { grid-template-columns: 1fr; } /* Remove as duas colunas */

            .lateral {
                position: fixed; top: 0; left: -300px; /* Esconde o menu na esquerda */
                width: 280px; height: 100%; z-index: 1000;
                background: var(--bg-card); padding: 20px;
                transition: 0.3s; box-shadow: 5px 0 15px rgba(0,0,0,0.2);
            }
            .lateral.active { left: 0; } /* Mostra o menu quando ativo */

            .container-tabelas { grid-template-columns: 1fr; }
            
            #overlay {
                display: none; position: fixed; top: 0; left: 0;
                width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 999;
            }
            #overlay.active { display: block; }
        }

        .btn-fechar-menu { display: none; width: 100%; padding: 10px; background: var(--danger-color); color: white; border: none; border-radius: 8px; margin-bottom: 15px; }
        @media (max-width: 1024px) { .btn-fechar-menu { display: block; } }
    </style>
</head>
<body>

<div id="overlay" onclick="toggleMenu()"></div>

<div class="topo-titulo">
    <button class="btn-menu-mobile" onclick="toggleMenu()">ðŸ“Š</button>
    <span id="tituloTopo">Re Solution â€” JAN/2026</span>
    <div class="controles-topo">
        <select id="mes" onchange="mudarMes()">
            <option value="2026-01">Jan/2026</option>
            <option value="2026-02">Fev/2026</option>
        </select>
        <button onclick="toggleDarkMode()" style="background:none; border:none; cursor:pointer;">ðŸŒ™</button>
    </div>
</div>

<div id="bannerAlerta">ðŸ”” Contas atrasadas ou hoje!</div>

<div class="layout">
    <div class="lateral" id="menuLateral">
        <button class="btn-fechar-menu" onclick="toggleMenu()">âœ• Fechar Menu</button>
        <div class="card">Recebido<span id="totalRecebido" style="color:var(--success-color)">R$ 0,00</span></div>
        <div class="card">Pago<span id="totalPago" style="color:var(--danger-color)">R$ 0,00</span></div>
        <div class="card">Saldo<span id="saldo" style="color:var(--primary-color)">R$ 0,00</span></div>
        <div class="card"><canvas id="graficoPizza"></canvas></div>
    </div>

    <div class="principal">
        <div class="secao-form">
            <div class="actions">
                <select id="tipo"><option value="receber">Receber</option><option value="pagar">Pagar</option></select>
                <input id="descricao" placeholder="DescriÃ§Ã£o" style="flex:2">
                <input id="valor" type="number" placeholder="R$">
                <input id="data" type="date">
                <button id="btnSalvar" onclick="adicionar()">Adicionar</button>
            </div>
        </div>

        <div class="container-tabelas">
            <div class="tabela-box">
                <h3>ðŸ“ˆ Recebimentos</h3>
                <table>
                    <thead><tr><th>Disc.</th><th>Valor</th><th>Data</th><th>Ok</th><th></th></tr></thead>
                    <tbody id="tabelaReceber"></tbody>
                </table>
            </div>
            <div class="tabela-box">
                <h3>ðŸ“‰ Pagamentos</h3>
                <table>
                    <thead><tr><th>Disc.</th><th>Valor</th><th>Data</th><th>Ok</th><th></th></tr></thead>
                    <tbody id="tabelaPagar"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
    // --- LÃ“GICA DO MENU ---
    function toggleMenu() {
        // SÃ³ executa se estiver em tela de celular/tablet
        if (window.innerWidth <= 1024) {
            document.getElementById('menuLateral').classList.toggle('active');
            document.getElementById('overlay').classList.toggle('active');
        }
    }

    // O restante das suas funÃ§Ãµes (adicionar, remover, render, mudarMes) continua aqui...
    // Mantenha as funÃ§Ãµes que jÃ¡ criamos anteriormente.

    let dadosPorMes = JSON.parse(localStorage.getItem('financeiroDados2026') || '{}');
    let mesAtual = document.getElementById('mes').value;
    let editandoIndex = null;
    let editandoTipo = null;

    function salvar(){ localStorage.setItem('financeiroDados2026', JSON.stringify(dadosPorMes)); }
    function garantirMes(){ if(!dadosPorMes[mesAtual]) dadosPorMes[mesAtual] = { receber: [], pagar: [] }; }
    function formatar(v){ return v.toLocaleString('pt-BR',{style:'currency',currency:'BRL'}); }

    function render() {
        garantirMes();
        const tRec = document.getElementById('tabelaReceber');
        const tPag = document.getElementById('tabelaPagar');
        const banner = document.getElementById('bannerAlerta');
        tRec.innerHTML = ''; tPag.innerHTML = '';
        
        let totalRec = 0, totalPag = 0, urgente = false;
        const hoje = new Date().toISOString().split('T')[0];

        dadosPorMes[mesAtual].receber.sort((a,b) => a.data > b.data ? 1 : -1);
        dadosPorMes[mesAtual].pagar.sort((a,b) => a.data > b.data ? 1 : -1);

        ['receber', 'pagar'].forEach(tipo => {
            dadosPorMes[mesAtual][tipo].forEach((item, i) => {
                if(item.marcado) { if(tipo === 'receber') totalRec += item.valor; else totalPag += item.valor; }
                const atrasado = (tipo === 'pagar' && !item.marcado && item.data <= hoje && item.data !== "");
                if(atrasado) urgente = true;

                const html = `<tr class="${atrasado ? 'vencendo-atrasado' : ''}">
                    <td>${item.descricao}</td>
                    <td>${formatar(item.valor)}</td>
                    <td>${item.data ? item.data.split('-').reverse().slice(0,2).join('/') : '--'}</td>
                    <td><input type="checkbox" ${item.marcado?'checked':''} onchange="toggleCheckbox('${tipo}',${i})"></td>
                    <td><button class="btn-action" onclick="remover('${tipo}',${i})">âœ•</button></td>
                </tr>`;
                if(tipo === 'receber') tRec.innerHTML += html; else tPag.innerHTML += html;
            });
        });

        banner.style.display = urgente ? 'block' : 'none';
        document.getElementById('totalRecebido').innerText = formatar(totalRec);
        document.getElementById('totalPago').innerText = formatar(totalPag);
        document.getElementById('saldo').innerText = formatar(totalRec - totalPag);
        atualizarGrafico();
    }

    function adicionar(){
        const tipo = document.getElementById('tipo').value;
        const descricao = document.getElementById('descricao').value;
        const valor = Number(document.getElementById('valor').value);
        const data = document.getElementById('data').value;
        if(!descricao || !valor) return alert("Preencha!");
        dadosPorMes[mesAtual][tipo].push({descricao, valor, data, marcado: false, categoria: 'Outros'});
        salvar(); render();
    }

    function toggleCheckbox(tipo, i){ dadosPorMes[mesAtual][tipo][i].marcado = !dadosPorMes[mesAtual][tipo][i].marcado; salvar(); render(); }
    function remover(tipo, i){ if(confirm("Apagar?")){ dadosPorMes[mesAtual][tipo].splice(i,1); salvar(); render(); } }

    function atualizarGrafico(){
        // (LÃ³gica do Chart.js que vocÃª jÃ¡ tem)
    }

    render();
</script>
</body>
</html>
